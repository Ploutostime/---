# 任务：管理员权限系统 + AI情感秘书系统

## 计划

- [ ] 步骤1：数据库设计与迁移
  - [ ] 1.1 users表添加role字段（admin/user）
  - [ ] 1.2 扩展secretary_personalities表（详细性格配置）
  - [ ] 1.3 创建secretary_emotional_states表（情绪状态）
  - [ ] 1.4 创建secretary_memory表（记忆系统）
  - [ ] 1.5 更新secretary_avatars表（添加详细性格数据）

- [ ] 步骤2：为15个秘书设计完整性格系统
  - [ ] 2.1 经典系列（御姐、萝莉、大叔、霸总）
  - [ ] 2.2 奇幻系列（精灵、龙娘、天使、恶魔）
  - [ ] 2.3 历史系列（武士、书生、公主、将军）
  - [ ] 2.4 现代系列（学姐、学长、AI助手）

- [ ] 步骤3：更新TypeScript类型定义
  - [ ] 3.1 添加Role类型
  - [ ] 3.2 扩展SecretaryPersonality类型
  - [ ] 3.3 添加EmotionalState类型
  - [ ] 3.4 添加Memory类型

- [ ] 步骤4：实现管理员权限系统
  - [ ] 4.1 创建权限检查Hook（useAdmin）
  - [ ] 4.2 创建管理员页面（AdminPage）
  - [ ] 4.3 添加路由保护
  - [ ] 4.4 实现用户管理功能

- [ ] 步骤5：升级AI对话系统
  - [ ] 5.1 更新secretary-chat Edge Function
  - [ ] 5.2 实现详细性格prompt系统
  - [ ] 5.3 实现情感识别和回应
  - [ ] 5.4 实现记忆系统
  - [ ] 5.5 实现上下文理解

- [ ] 步骤6：更新API函数
  - [ ] 6.1 添加管理员相关API
  - [ ] 6.2 添加情绪状态API
  - [ ] 6.3 添加记忆系统API

- [ ] 步骤7：更新UI组件
  - [ ] 7.1 更新SecretaryChat组件（显示情绪）
  - [ ] 7.2 更新设置页面（管理员入口）
  - [ ] 7.3 创建管理员仪表盘

- [ ] 步骤8：测试与验证
  - [ ] 8.1 ESLint检查
  - [ ] 8.2 功能测试
  - [ ] 8.3 性格一致性测试

## 注意事项

- 每个秘书的性格必须与其身份完美契合
- AI对话要体现人类情感和语言特点
- 管理员权限要严格控制
- 记忆系统要保护用户隐私
