# 专属学习秘书功能说明

## 功能概述

智学秘伴新增了**专属学习秘书**功能，让用户可以根据个人喜好定制专属的学习助手形象，包括形象类型、性格特点和服装风格。秘书将在仪表盘为用户提供个性化的问候、提醒和鼓励，让学习过程更有温度和趣味性。

## 核心特性

### 1. 形象定制（6种类型）✨ 动漫人物形象

用户可以从以下6种形象中选择，每种形象都配有精美的**动漫人物全身立绘**：

| 形象类型 | 图标 | 名称 | 特点描述 | 动漫形象 |
|---------|------|------|---------|----------|
| 萝莉 (loli) | 🌸 | 小萌 | 可爱活泼的萝莉形象，充满元气和活力，总是用最甜美的声音鼓励你学习 | 粉色头发校园服装的元气少女，全身立绘 |
| 御姐 (oneesan) | 💐 | 优雅姐姐 | 成熟优雅的御姐形象，温柔体贴，像姐姐一样关心你的学习和生活 | 长发职业装的成熟女性，全身立绘 |
| 大叔 (uncle) | 🎩 | 稳重叔叔 | 稳重可靠的大叔形象，经验丰富，用人生阅历指导你的学习规划 | 西装革履的成熟男性，全身立绘 |
| 霸总 (boss) | 👔 | 霸道总裁 | 干练高效的霸总形象，严格要求，帮助你高效完成学习目标 | 商务西装的冷酷帅气精英，全身立绘 |
| 学姐 (senior_sister) | 📚 | 温柔学姐 | 亲切耐心的学姐形象，善于引导，分享学习经验和技巧 | 校服知性的温柔学姐，全身立绘 |
| 学长 (senior_brother) | ⚡ | 阳光学长 | 阳光积极的学长形象，充满正能量，给你鼓励和支持 | 运动服的阳光男生，全身立绘 |

**形象展示：**
- 在设置页面选择形象时，可以看到每个形象的**全身动漫人物立绘**
- 在仪表盘的秘书问候卡片中，显示**完整的人物形象**（包括手、腿、肢体、服装）
- 在浮窗秘书中，显示**全身人物立绘**，生动展现秘书形象
- 所有形象都采用精美的动漫风格，包含完整的肢体动作和服装细节

### 2. 性格定制（5种类型）

每种性格都有独特的语言风格和互动方式：

| 性格类型 | 图标 | 名称 | 特点 | 语言风格 |
|---------|------|------|------|---------|
| 温柔型 (gentle) | 💕 | 温柔型 | 温柔体贴，鼓励为主 | 语气柔和，充满关怀 |
| 严格型 (strict) | 📋 | 严格型 | 严格督促，要求严格 | 注重效率，强调纪律 |
| 活泼型 (lively) | 🎉 | 活泼型 | 幽默风趣，轻松愉快 | 充满趣味，活力四射 |
| 冷静型 (calm) | 🧘 | 冷静型 | 理性分析，客观建议 | 逻辑清晰，数据导向 |
| 激励型 (motivating) | 🔥 | 激励型 | 充满正能量，积极向上 | 激发动力，鼓舞人心 |

### 3. 服装定制（8套类型）

根据不同场景和喜好选择服装：

| 服装类型 | 图标 | 名称 | 描述 | 适合形象 |
|---------|------|------|------|---------|
| 校园风 (campus) | 🎒 | 清新校园装 | 清新的学生装，充满青春活力 | 萝莉、学姐、学长 |
| 校园风 (campus) | 🎒 | 运动休闲装 | 舒适的运动服，适合轻松学习 | 萝莉、学姐、学长 |
| 职业装 (business) | 💼 | 职业西装 | 正式的职业装，专业干练 | 御姐、霸总、大叔 |
| 职业装 (business) | 💼 | 优雅衬衫 | 优雅的衬衫套装，知性大方 | 御姐、学姐 |
| 休闲风 (casual) | 👕 | 休闲T恤 | 舒适的T恤，轻松自在 | 萝莉、学长 |
| 休闲风 (casual) | 👕 | 温暖卫衣 | 温暖的卫衣，亲切随和 | 萝莉、学姐、学长 |
| 正式装 (formal) | 👗 | 正式礼服 | 正式的礼服，庄重典雅 | 御姐、霸总 |
| 特殊装 (special) | 🎭 | 节日主题装 | 节日特别款，充满节日气氛 | 所有形象 |

### 4. 浮窗秘书 ✨ 新特性

秘书可以以**浮窗形式**出现在屏幕上，随时陪伴你的学习：

**浮窗特性：**
- 🎯 **智能定位**：默认显示在屏幕右下角，可自由拖动到任意位置
- 📍 **位置记忆**：自动保存浮窗位置，下次打开时恢复
- 🔄 **最小化/展开**：点击可最小化为小图标，节省屏幕空间
- 💬 **实时对话**：展开时显示对话气泡，实时更新问候、提醒和鼓励
- ⏰ **定时更新**：每分钟自动更新消息内容，保持新鲜感
- 🎨 **美观设计**：渐变背景、圆角卡片、柔和阴影，视觉效果出色
- 👆 **拖动操作**：鼠标拖动标题栏即可移动浮窗位置
- ❌ **隐藏功能**：可随时关闭浮窗，不影响其他功能使用
- 🔔 **智能提醒**：根据时间和任务情况自动切换消息类型

**浮窗状态：**
- **展开状态**：显示秘书头像、名称、对话气泡和配置信息
- **最小化状态**：只显示秘书头像和消息图标，占用空间极小
- **隐藏状态**：完全隐藏，可在设置中重新启用

**消息类型：**
- 🌅 **早晨（6:00-12:00）**：温暖的问候语
- 🌞 **下午（12:00-18:00）**：任务提醒和督促
- 🌙 **晚上（18:00-6:00）**：鼓励和总结

### 5. 个性化互动

秘书会根据性格类型提供不同风格的互动：

#### 问候语示例

- **温柔型**：早安呀~今天也要加油哦！小秘相信你一定可以的💕
- **严格型**：早上好！今天的学习计划已经准备好了，请按时完成！
- **活泼型**：嘿！新的一天开始啦~准备好和我一起征服学习任务了吗？💪
- **冷静型**：早上好。根据你的学习计划，今天有3个任务需要完成。
- **激励型**：早安！新的一天充满无限可能！让我们一起创造奇迹吧！🌟

#### 提醒语示例

- **温柔型**：温馨提醒：数学作业的截止时间快到了，记得完成哦~不要太有压力，慢慢来就好😊
- **严格型**：注意：数学作业即将到期！请立即处理，不要拖延！
- **活泼型**：叮咚~数学作业在召唤你啦！快去完成它，然后我们一起庆祝！🎉
- **冷静型**：提醒：数学作业剩余时间2小时。建议合理安排时间，确保按时完成。
- **激励型**：加油！数学作业等着你去征服！你一定可以做到的，相信自己！💪

#### 鼓励语示例

- **温柔型**：哇！你真的很棒呢！继续保持这个状态，小秘一直在为你加油！✨
- **严格型**：完成得不错，但还有提升空间。继续努力，追求更高的目标！
- **活泼型**：耶！又完成一个任务！你简直是学习小超人！继续冲冲冲！🚀
- **冷静型**：任务完成效率良好。建议继续保持当前学习节奏，稳步提升。
- **激励型**：太棒了！你的努力没有白费！继续前进，成功就在前方！🏆

## 使用指南

### 步骤1：进入设置页面

1. 登录智学秘伴系统
2. 点击左侧导航栏的"设置"菜单
3. 滚动到"专属学习秘书"卡片

### 步骤2：启用秘书功能

1. 打开"启用学习秘书"开关
2. 输入你想给秘书起的名字（默认为"小秘"）

### 步骤3：选择形象

1. 点击"形象"标签
2. 浏览6种形象类型
3. 点击你喜欢的形象卡片进行选择
4. 选中的卡片会显示蓝色边框和勾选标记

### 步骤4：选择性格

1. 点击"性格"标签
2. 浏览5种性格类型
3. 点击你喜欢的性格卡片进行选择
4. 每种性格都有详细的描述说明

### 步骤5：选择服装

1. 点击"服装"标签
2. 浏览8套服装类型
3. 点击你喜欢的服装卡片进行选择
4. 注意查看服装适合的形象类型

### 步骤6：保存配置

1. 确认所有选择无误
2. 点击"保存配置"按钮
3. 等待保存成功提示

### 步骤7：查看效果

1. 返回仪表盘页面
2. 在页面顶部查看秘书的问候卡片
3. 可以看到秘书的形象图标、名称和个性化问候语
4. 卡片底部显示当前配置的形象、性格和服装信息

### 步骤8：使用浮窗秘书 ✨

1. **查看浮窗**：保存配置后，屏幕上会自动出现浮窗秘书
2. **拖动位置**：鼠标按住浮窗标题栏，拖动到你喜欢的位置
3. **最小化**：点击浮窗右上角的最小化按钮，缩小为小图标
4. **展开**：点击最小化的图标，重新展开浮窗
5. **关闭**：点击浮窗右上角的关闭按钮，隐藏浮窗
6. **重新显示**：在设置页面重新保存配置，或刷新页面

**浮窗操作技巧：**
- 浮窗位置会自动保存，下次打开时恢复
- 最小化状态也会被记住
- 浮窗不会随页面滚动，始终固定在屏幕上
- 拖动时会自动限制在窗口范围内
- 每分钟自动更新消息内容

## 技术实现

### 数据库设计

系统创建了3张新表来支持秘书功能：

1. **secretary_avatars** - 秘书形象库
   - 存储6种预置形象
   - 包含形象名称、类型、描述、图标等信息

2. **secretary_personalities** - 秘书性格库
   - 存储5种预置性格
   - 包含性格名称、类型、描述、语言模板等信息

3. **secretary_outfits** - 秘书服装库
   - 存储8套预置服装
   - 包含服装名称、类型、描述、适合形象等信息

4. **user_preferences** - 用户偏好表（扩展）
   - 添加秘书配置字段
   - 关联用户选择的形象、性格、服装
   - 存储自定义秘书名称和启用状态

### 核心组件

1. **SecretaryCard** - 秘书卡片组件
   - 用于展示形象、性格、服装选项
   - 支持选中状态显示
   - 显示类型图标和描述信息

2. **SecretaryAssistant** - 秘书助手组件
   - 在仪表盘展示秘书问候
   - 根据性格生成个性化语言
   - 显示当前配置信息
   - 提供快速跳转到设置的入口

3. **SettingsPage** - 设置页面（增强）
   - 添加秘书定制区域
   - 使用 Tabs 组件切换形象/性格/服装
   - 实现选择和保存逻辑

4. **FloatingSecretary** - 浮窗秘书组件 ✨ 新增
   - 全局浮窗显示秘书
   - 支持拖动、最小化、关闭
   - 自动保存位置和状态
   - 定时更新消息内容
   - 智能消息类型切换
   - 美观的对话气泡设计
   - 响应式交互效果

### API 函数

系统提供了完整的 API 函数支持秘书功能：

```typescript
// 获取所有秘书形象
getSecretaryAvatars(): Promise<SecretaryAvatar[]>

// 获取所有秘书性格
getSecretaryPersonalities(): Promise<SecretaryPersonality[]>

// 获取所有秘书服装
getSecretaryOutfits(): Promise<SecretaryOutfit[]>

// 获取用户的秘书配置
getUserSecretaryConfig(userId: string): Promise<SecretaryConfig | null>

// 更新用户的秘书配置
updateSecretaryConfig(userId: string, config: {...}): Promise<boolean>

// 生成秘书问候语
generateSecretaryGreeting(personality, secretaryName, userName): string

// 生成秘书提醒语
generateSecretaryReminder(personality, secretaryName, taskTitle, timeLeft): string

// 生成秘书鼓励语
generateSecretaryEncouragement(personality, secretaryName): string
```

## 未来扩展

### 计划中的功能

1. **语音播报**
   - 根据秘书的语音类型播放真实语音
   - 支持文字转语音（TTS）
   - 可调节语速和音量

2. **动画效果**
   - 秘书形象的动态展示
   - 说话时的动画效果
   - 表情变化

3. **智能对话**
   - 接入 AI 对话系统
   - 支持自然语言交互
   - 学习建议和答疑

4. **更多形象**
   - 增加更多形象类型
   - 支持用户上传自定义形象
   - 季节限定形象

5. **更多服装**
   - 节日主题服装
   - 季节主题服装
   - 用户自定义服装

6. **情感系统**
   - 根据学习表现调整秘书情绪
   - 好感度系统
   - 特殊互动解锁

7. **提醒增强**
   - 在任务列表中显示秘书提醒
   - 桌面通知集成秘书形象
   - 定时问候和鼓励

## 常见问题

### Q1: 如何更换秘书形象？

A: 进入设置页面 → 专属学习秘书 → 选择新的形象/性格/服装 → 点击保存配置

### Q2: 可以只更换性格或服装吗？

A: 可以！形象、性格、服装是独立的，可以单独更换任意一项。

### Q3: 秘书会在哪些地方出现？

A: 秘书会在两个地方出现：
1. **仪表盘页面**：顶部显示秘书问候卡片
2. **浮窗形式**：屏幕上的可拖动浮窗，随时陪伴你学习 ✨

### Q4: 如何关闭秘书功能？

A: 进入设置页面 → 专属学习秘书 → 关闭"启用学习秘书"开关 → 保存配置

### Q5: 秘书的问候语会变化吗？

A: 会的！问候语会根据你选择的性格类型自动生成，每种性格都有独特的语言风格。

### Q6: 可以自定义秘书的对话内容吗？

A: 目前使用预设的语言模板。未来版本会支持更多自定义选项。

### Q7: 不同形象有什么区别？

A: 主要是视觉呈现和语言风格的区别。每种形象都有独特的图标和描述，配合不同性格会产生不同的互动体验。

### Q8: 服装选择有限制吗？

A: 每套服装都标注了适合的形象类型，但系统不会强制限制。你可以自由搭配。

### Q9: 如何移动浮窗秘书的位置？ ✨

A: 鼠标按住浮窗的标题栏（显示秘书名称的区域），拖动到你想要的位置即可。位置会自动保存。

### Q10: 浮窗秘书可以最小化吗？ ✨

A: 可以！点击浮窗右上角的最小化按钮，浮窗会缩小为一个小图标。点击图标可以重新展开。

### Q11: 如何临时关闭浮窗秘书？ ✨

A: 点击浮窗右上角的关闭按钮（X），浮窗会隐藏。刷新页面或重新保存配置可以重新显示。

### Q12: 浮窗秘书的消息多久更新一次？ ✨

A: 浮窗秘书每分钟自动更新一次消息内容，根据时间段和任务情况智能切换问候、提醒和鼓励。

## 反馈与建议

如果你对秘书功能有任何建议或发现问题，欢迎通过以下方式反馈：

- 在系统中提交反馈
- 联系开发团队
- 参与用户调研

我们会持续优化秘书功能，让你的学习伙伴更加智能和贴心！

---

**智学秘伴团队**  
*规划你的学习，见证你的成长*
