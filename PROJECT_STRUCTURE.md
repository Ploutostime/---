# æ™ºå­¦ç§˜ä¼´ - é¡¹ç›®ç»“æ„æ–‡æ¡£

## ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„

```
æ™ºå­¦ç§˜ä¼´/
â”œâ”€â”€ ğŸ“‚ docs/                          # æ–‡æ¡£ç›®å½•
â”‚   â””â”€â”€ prd.md                        # äº§å“éœ€æ±‚æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“‚ public/                        # é™æ€èµ„æºç›®å½•
â”‚   â”œâ”€â”€ ğŸ“‚ images/                    # å›¾ç‰‡èµ„æº
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ error/                 # é”™è¯¯é¡µé¢å›¾ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ 404.svg              # 404é”™è¯¯å›¾ç‰‡ï¼ˆäº®è‰²ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ 404-dark.svg         # 404é”™è¯¯å›¾ç‰‡ï¼ˆæš—è‰²ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ 500.svg              # 500é”™è¯¯å›¾ç‰‡ï¼ˆäº®è‰²ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ 500-dark.svg         # 500é”™è¯¯å›¾ç‰‡ï¼ˆæš—è‰²ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ 503.svg              # 503é”™è¯¯å›¾ç‰‡ï¼ˆäº®è‰²ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ 503-dark.svg         # 503é”™è¯¯å›¾ç‰‡ï¼ˆæš—è‰²ï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ logo/                  # Logoèµ„æº
â”‚   â”‚   â”‚   â”œâ”€â”€ auth-logo.svg        # è®¤è¯é¡µé¢Logo
â”‚   â”‚   â”‚   â”œâ”€â”€ logo-dark.svg        # æš—è‰²ä¸»é¢˜Logo
â”‚   â”‚   â”‚   â””â”€â”€ logo-icon.svg        # Logoå›¾æ ‡
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ shape/                 # è£…é¥°å›¾å½¢
â”‚   â”‚   â”‚   â””â”€â”€ grid-01.svg          # ç½‘æ ¼èƒŒæ™¯
â”‚   â”‚   â””â”€â”€ favicon.ico              # ç½‘ç«™å›¾æ ‡
â”‚   â””â”€â”€ favicon.png                   # å¤‡ç”¨ç½‘ç«™å›¾æ ‡
â”‚
â”œâ”€â”€ ğŸ“‚ src/                           # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“‚ components/                # ç»„ä»¶ç›®å½•
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ common/                # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ PageMeta.tsx         # é¡µé¢å…ƒä¿¡æ¯ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ RouteGuard.tsx       # è·¯ç”±å®ˆå«ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ThemeToggle.tsx      # ä¸»é¢˜åˆ‡æ¢ç»„ä»¶
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ layouts/               # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ MainLayout.tsx       # ä¸»å¸ƒå±€ï¼ˆä¾§è¾¹æ +å†…å®¹åŒºï¼‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ ui/                    # UIåŸºç¡€ç»„ä»¶ï¼ˆshadcn/uiï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ accordion.tsx        # æ‰‹é£ç´ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ alert-dialog.tsx     # è­¦å‘Šå¯¹è¯æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ alert.tsx            # è­¦å‘Šæç¤º
â”‚   â”‚   â”‚   â”œâ”€â”€ avatar.tsx           # å¤´åƒç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ badge.tsx            # å¾½ç« ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx           # æŒ‰é’®ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ calendar.tsx         # æ—¥å†ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ card.tsx             # å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ chart.tsx            # å›¾è¡¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ checkbox.tsx         # å¤é€‰æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ dialog.tsx           # å¯¹è¯æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ dropdown-menu.tsx    # ä¸‹æ‹‰èœå•
â”‚   â”‚   â”‚   â”œâ”€â”€ form.tsx             # è¡¨å•ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ input.tsx            # è¾“å…¥æ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ label.tsx            # æ ‡ç­¾
â”‚   â”‚   â”‚   â”œâ”€â”€ map.tsx              # åœ°å›¾ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ multi-select.tsx     # å¤šé€‰ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ popover.tsx          # å¼¹å‡ºæ¡†
â”‚   â”‚   â”‚   â”œâ”€â”€ progress.tsx         # è¿›åº¦æ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ qrcodedataurl.tsx    # äºŒç»´ç ç”Ÿæˆç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ select.tsx           # é€‰æ‹©å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ separator.tsx        # åˆ†éš”çº¿
â”‚   â”‚   â”‚   â”œâ”€â”€ sheet.tsx            # ä¾§è¾¹æŠ½å±‰
â”‚   â”‚   â”‚   â”œâ”€â”€ skeleton.tsx         # éª¨æ¶å±
â”‚   â”‚   â”‚   â”œâ”€â”€ slider.tsx           # æ»‘å—
â”‚   â”‚   â”‚   â”œâ”€â”€ sonner.tsx           # Toasté€šçŸ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ switch.tsx           # å¼€å…³
â”‚   â”‚   â”‚   â”œâ”€â”€ table.tsx            # è¡¨æ ¼
â”‚   â”‚   â”‚   â”œâ”€â”€ tabs.tsx             # æ ‡ç­¾é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ textarea.tsx         # æ–‡æœ¬åŸŸ
â”‚   â”‚   â”‚   â”œâ”€â”€ tooltip.tsx          # å·¥å…·æç¤º
â”‚   â”‚   â”‚   â””â”€â”€ video.tsx            # è§†é¢‘æ’­æ”¾å™¨
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ dropzone.tsx             # æ–‡ä»¶æ‹–æ”¾ä¸Šä¼ ç»„ä»¶
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ contexts/                  # React Context
â”‚   â”‚   â””â”€â”€ AuthContext.tsx          # è®¤è¯ä¸Šä¸‹æ–‡ï¼ˆç”¨æˆ·çŠ¶æ€ç®¡ç†ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ db/                        # æ•°æ®åº“ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ api.ts                   # æ•°æ®åº“APIå°è£…
â”‚   â”‚   â””â”€â”€ supabase.ts              # Supabaseå®¢æˆ·ç«¯é…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ hooks/                     # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â”œâ”€â”€ use-debounce.ts          # é˜²æŠ–Hook
â”‚   â”‚   â”œâ”€â”€ use-go-back.ts           # è¿”å›å¯¼èˆªHook
â”‚   â”‚   â”œâ”€â”€ use-mobile.ts            # ç§»åŠ¨ç«¯æ£€æµ‹Hook
â”‚   â”‚   â”œâ”€â”€ use-supabase-upload.ts   # Supabaseä¸Šä¼ Hook
â”‚   â”‚   â””â”€â”€ use-toast.tsx            # Toasté€šçŸ¥Hook
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ lib/                       # å·¥å…·åº“
â”‚   â”‚   â””â”€â”€ utils.ts                 # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ pages/                     # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ AdminPage.tsx            # ç®¡ç†å‘˜é¡µé¢
â”‚   â”‚   â”œâ”€â”€ DashboardPage.tsx        # ä»ªè¡¨ç›˜é¡µé¢ â­
â”‚   â”‚   â”œâ”€â”€ KnowledgePage.tsx        # çŸ¥è¯†æ”¶è—é¡µé¢
â”‚   â”‚   â”œâ”€â”€ LoginPage.tsx            # ç™»å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ NotFound.tsx             # 404é¡µé¢
â”‚   â”‚   â”œâ”€â”€ SchedulePage.tsx         # æ—¶é—´è¡¨é¡µé¢
â”‚   â”‚   â”œâ”€â”€ SettingsPage.tsx         # è®¾ç½®é¡µé¢ â­
â”‚   â”‚   â”œâ”€â”€ StatisticsPage.tsx       # å­¦ä¹ ç»Ÿè®¡é¡µé¢
â”‚   â”‚   â”œâ”€â”€ TasksPage.tsx            # äº‹åŠ¡ç®¡ç†é¡µé¢
â”‚   â”‚   â””â”€â”€ VideoTerminalPage.tsx    # ç§äººç»ˆç«¯é¡µé¢ â­ æ–°å¢
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ services/                  # æœåŠ¡å±‚ï¼ˆé¢„ç•™ï¼‰
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“‚ types/                     # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ index.ts                 # ç±»å‹å¯¼å‡º
â”‚   â”‚   â””â”€â”€ types.ts                 # ä¸šåŠ¡ç±»å‹å®šä¹‰
â”‚   â”‚
â”‚   â”œâ”€â”€ App.tsx                      # åº”ç”¨æ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ main.tsx                     # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ routes.tsx                   # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ index.css                    # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ global.d.ts                  # å…¨å±€ç±»å‹å£°æ˜
â”‚   â”œâ”€â”€ svg.d.ts                     # SVGç±»å‹å£°æ˜
â”‚   â””â”€â”€ vite-env.d.ts                # Viteç¯å¢ƒç±»å‹
â”‚
â”œâ”€â”€ ğŸ“‚ supabase/                      # Supabaseé…ç½®
â”‚   â”œâ”€â”€ ğŸ“‚ migrations/                # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ 00001_create_initial_schema.sql        # åˆå§‹æ•°æ®åº“ç»“æ„
â”‚   â”‚   â””â”€â”€ 00002_add_video_recommendation_features.sql  # è§†é¢‘æ¨èåŠŸèƒ½
â”‚   â””â”€â”€ config.toml                  # Supabaseé…ç½®æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“„ README.md                      # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ TODO.md                        # ä»»åŠ¡æ¸…å•
â”œâ”€â”€ ğŸ“„ PROJECT_STRUCTURE.md           # é¡¹ç›®ç»“æ„æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ ğŸ“„ package.json                   # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ ğŸ“„ pnpm-lock.yaml                 # ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ ğŸ“„ tsconfig.json                  # TypeScripté…ç½®
â”œâ”€â”€ ğŸ“„ tailwind.config.js             # Tailwind CSSé…ç½®
â”œâ”€â”€ ğŸ“„ vite.config.ts                 # Viteæ„å»ºé…ç½®
â”œâ”€â”€ ğŸ“„ biome.json                     # Biomeä»£ç æ£€æŸ¥é…ç½®
â””â”€â”€ ğŸ“„ components.json                # shadcn/uiç»„ä»¶é…ç½®
```

## ğŸ“Š æ ¸å¿ƒæ¨¡å—è¯´æ˜

### 1. é¡µé¢æ¨¡å— (src/pages/)

#### ğŸ  DashboardPage.tsx - ä»ªè¡¨ç›˜
**åŠŸèƒ½ï¼š** ç³»ç»Ÿé¦–é¡µï¼Œæ•°æ®æ¦‚è§ˆä¸­å¿ƒ
- æ˜¾ç¤ºå­¦ä¹ ç»Ÿè®¡æ•°æ®ï¼ˆæ€»å­¦ä¹ æ—¶é•¿ã€å®Œæˆä»»åŠ¡æ•°ã€å¾…åŠä»»åŠ¡æ•°ã€çŸ¥è¯†ç‚¹æ•°é‡ï¼‰
- å±•ç¤ºå³å°†åˆ°æœŸçš„ä»»åŠ¡åˆ—è¡¨ï¼ˆ7å¤©å†…ï¼‰
- æ˜¾ç¤ºå¾…å¤ä¹ çš„çŸ¥è¯†ç‚¹
- **æ–°å¢ï¼š** æ¨èè§†é¢‘å¡ç‰‡ï¼ˆæ ¹æ®ç”¨æˆ·ä¸“ä¸šæ¨èï¼‰
- å¿«é€Ÿå¯¼èˆªåˆ°å„åŠŸèƒ½æ¨¡å—

#### ğŸ“ TasksPage.tsx - äº‹åŠ¡ç®¡ç†
**åŠŸèƒ½ï¼š** å­¦ç”Ÿäº‹åŠ¡å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
- ä»»åŠ¡CRUDæ“ä½œï¼ˆåˆ›å»ºã€æŸ¥çœ‹ã€ç¼–è¾‘ã€åˆ é™¤ï¼‰
- ä»»åŠ¡ç±»å‹ï¼šç«èµ›ã€ä½œä¸šã€è€ƒè¯•ã€å­¦ä¹ ã€å…¶ä»–
- ä¼˜å…ˆçº§è®¾ç½®ï¼šä½ã€ä¸­ã€é«˜ã€ç´§æ€¥
- çŠ¶æ€ç®¡ç†ï¼šå¾…åŠã€è¿›è¡Œä¸­ã€å·²å®Œæˆã€å·²å–æ¶ˆ
- æˆªæ­¢æ—¶é—´æé†’
- ä»»åŠ¡ç­›é€‰å’Œæœç´¢

#### ğŸ“… SchedulePage.tsx - æ—¶é—´è¡¨
**åŠŸèƒ½ï¼š** æ™ºèƒ½å­¦ä¹ æ—¶é—´è§„åˆ’
- å‘¨è§†å›¾å±•ç¤ºå­¦ä¹ è®¡åˆ’
- è‡ªåŠ¨ç”Ÿæˆä¸ªæ€§åŒ–æ—¶é—´è¡¨
- æ ¹æ®ä»»åŠ¡ä¼˜å…ˆçº§å’Œæˆªæ­¢æ—¶é—´æ™ºèƒ½å®‰æ’
- æ—¶é—´æ®µå¯è§†åŒ–å±•ç¤º
- æ”¯æŒæ‰‹åŠ¨è°ƒæ•´

#### ğŸ“š KnowledgePage.tsx - çŸ¥è¯†æ”¶è—
**åŠŸèƒ½ï¼š** çŸ¥è¯†ç‚¹ç®¡ç†ä¸å¤ä¹ ç³»ç»Ÿ
- çŸ¥è¯†ç‚¹æ”¶è—å’Œæ•´ç†
- å­¦ç§‘åˆ†ç±»ç®¡ç†
- å¤ä¹ æ¬¡æ•°è®°å½•
- é—´éš”é‡å¤ç®—æ³•æé†’
- çŸ¥è¯†ç‚¹æœç´¢å’Œç­›é€‰
- æ”¯æŒæ·»åŠ æ¥æºé“¾æ¥

#### ğŸ¥ VideoTerminalPage.tsx - ç§äººç»ˆç«¯ â­ æ–°åŠŸèƒ½
**åŠŸèƒ½ï¼š** ä¸ªæ€§åŒ–å­¦æœ¯è§†é¢‘æ¨èç³»ç»Ÿ
- æ ¹æ®ç”¨æˆ·ä¸“ä¸šæ™ºèƒ½æ¨è Bilibili å­¦æœ¯è§†é¢‘
- è§†é¢‘æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤
- è§†é¢‘æ”¶è—åŠŸèƒ½
- æ ‡è®°å·²è§‚çœ‹/æœªè§‚çœ‹
- è§‚çœ‹å†å²è®°å½•
- æŒ‰ä¸“ä¸šæ ‡ç­¾ç­›é€‰
- è§†é¢‘æœç´¢åŠŸèƒ½
- è§‚çœ‹è¿›åº¦è¿½è¸ª

#### ğŸ“ˆ StatisticsPage.tsx - å­¦ä¹ ç»Ÿè®¡
**åŠŸèƒ½ï¼š** å­¦ä¹ æ•°æ®å¯è§†åŒ–åˆ†æ
- æ€»å­¦ä¹ æ—¶é•¿ç»Ÿè®¡
- æœ¬å‘¨å­¦ä¹ æ—¶é•¿è¶‹åŠ¿å›¾
- ä»»åŠ¡å®Œæˆæƒ…å†µç»Ÿè®¡
- ä»»åŠ¡ç±»å‹åˆ†å¸ƒå›¾
- çŸ¥è¯†ç‚¹æ•°é‡ç»Ÿè®¡
- æ•°æ®å›¾è¡¨å±•ç¤ºï¼ˆä½¿ç”¨ Rechartsï¼‰

#### âš™ï¸ SettingsPage.tsx - è®¾ç½® â­ ä¼˜åŒ–
**åŠŸèƒ½ï¼š** ç³»ç»Ÿä¸ªæ€§åŒ–é…ç½®ä¸­å¿ƒ
- **æ—¶é—´è¡¨è®¾ç½®ï¼š**
  - æ¯æ—¥å­¦ä¹ ç›®æ ‡ï¼ˆå°æ—¶ï¼‰
  - åå¥½å­¦ä¹ æ—¶é—´æ®µ
  - ä¼‘æ¯æ—¶é•¿è®¾ç½®
  - è‡ªåŠ¨ç”Ÿæˆæ—¶é—´è¡¨å¼€å…³
- **ä¸ªäººä¿¡æ¯è®¾ç½®ï¼š** â­ æ–°å¢
  - ä¸“ä¸šé€‰æ‹©ï¼ˆ30+ä¸“ä¸šæ ‡ç­¾ï¼‰
  - å¹´çº§é€‰æ‹©ï¼ˆå¤§ä¸€åˆ°åšå£«ï¼‰
- **è§†é¢‘æ¨èåå¥½ï¼š** â­ æ–°å¢
  - è‡ªåŠ¨æ¨èå¼€å…³
  - æ¯æ—¥æ¨èæ•°é‡ï¼ˆ3/5/10/15ä¸ªï¼‰
- **å…¶ä»–è®¾ç½®ï¼š**
  - ä»»åŠ¡æé†’å¼€å…³
  - å¤ä¹ æé†’å¼€å…³
  - å­¦ä¹ ç»Ÿè®¡å¼€å…³

#### ğŸ‘¤ AdminPage.tsx - ç®¡ç†å‘˜
**åŠŸèƒ½ï¼š** ç”¨æˆ·ç®¡ç†å’Œç³»ç»Ÿç®¡ç†
- ç”¨æˆ·åˆ—è¡¨æŸ¥çœ‹
- ç”¨æˆ·è§’è‰²ç®¡ç†
- ç³»ç»Ÿæ•°æ®ç»Ÿè®¡
- ä»…ç®¡ç†å‘˜å¯è®¿é—®

#### ğŸ” LoginPage.tsx - ç™»å½•
**åŠŸèƒ½ï¼š** ç”¨æˆ·è®¤è¯å…¥å£
- ç”¨æˆ·å+å¯†ç ç™»å½•
- ç”¨æˆ·æ³¨å†Œï¼ˆè‡ªåŠ¨æ·»åŠ  @miaoda.com åç¼€ï¼‰
- é¦–ä½æ³¨å†Œç”¨æˆ·è‡ªåŠ¨æˆä¸ºç®¡ç†å‘˜
- è¡¨å•éªŒè¯
- é”™è¯¯æç¤º

### 2. æ•°æ®åº“æ¨¡å— (src/db/)

#### api.ts - æ•°æ®åº“APIå°è£…
**åŠŸèƒ½ï¼š** ç»Ÿä¸€çš„æ•°æ®è®¿é—®å±‚
- **ç”¨æˆ·ç›¸å…³ï¼š**
  - `getProfile()` - è·å–ç”¨æˆ·ä¿¡æ¯
  - `updateProfile()` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
  - `getAllProfiles()` - è·å–æ‰€æœ‰ç”¨æˆ·ï¼ˆç®¡ç†å‘˜ï¼‰
- **ä»»åŠ¡ç›¸å…³ï¼š**
  - `getTasks()` - è·å–ä»»åŠ¡åˆ—è¡¨
  - `getTask()` - è·å–å•ä¸ªä»»åŠ¡
  - `createTask()` - åˆ›å»ºä»»åŠ¡
  - `updateTask()` - æ›´æ–°ä»»åŠ¡
  - `deleteTask()` - åˆ é™¤ä»»åŠ¡
  - `getUpcomingTasks()` - è·å–å³å°†åˆ°æœŸçš„ä»»åŠ¡
- **çŸ¥è¯†ç‚¹ç›¸å…³ï¼š**
  - `getKnowledgeItems()` - è·å–çŸ¥è¯†ç‚¹åˆ—è¡¨
  - `createKnowledgeItem()` - åˆ›å»ºçŸ¥è¯†ç‚¹
  - `updateKnowledgeItem()` - æ›´æ–°çŸ¥è¯†ç‚¹
  - `deleteKnowledgeItem()` - åˆ é™¤çŸ¥è¯†ç‚¹
  - `getReviewDueItems()` - è·å–å¾…å¤ä¹ çŸ¥è¯†ç‚¹
- **å­¦ä¹ è®°å½•ç›¸å…³ï¼š**
  - `getStudySessions()` - è·å–å­¦ä¹ è®°å½•
  - `createStudySession()` - åˆ›å»ºå­¦ä¹ è®°å½•
  - `updateStudySession()` - æ›´æ–°å­¦ä¹ è®°å½•
  - `deleteStudySession()` - åˆ é™¤å­¦ä¹ è®°å½•
- **æ—¶é—´è¡¨è®¾ç½®ç›¸å…³ï¼š**
  - `getScheduleSettings()` - è·å–æ—¶é—´è¡¨è®¾ç½®
  - `updateScheduleSettings()` - æ›´æ–°æ—¶é—´è¡¨è®¾ç½®
- **ç»Ÿè®¡ç›¸å…³ï¼š**
  - `getStudyStats()` - è·å–å­¦ä¹ ç»Ÿè®¡æ•°æ®
- **ä¸“ä¸šæ ‡ç­¾ç›¸å…³ï¼š** â­ æ–°å¢
  - `getMajorTags()` - è·å–æ‰€æœ‰ä¸“ä¸šæ ‡ç­¾
- **è§†é¢‘æ¨èç›¸å…³ï¼š** â­ æ–°å¢
  - `getVideoRecommendations()` - è·å–è§†é¢‘æ¨èåˆ—è¡¨
  - `getVideoRecommendation()` - è·å–å•ä¸ªè§†é¢‘
  - `createVideoRecommendation()` - åˆ›å»ºè§†é¢‘æ¨è
  - `updateVideoRecommendation()` - æ›´æ–°è§†é¢‘ä¿¡æ¯
  - `deleteVideoRecommendation()` - åˆ é™¤è§†é¢‘
  - `toggleVideoFavorite()` - åˆ‡æ¢æ”¶è—çŠ¶æ€
  - `markVideoAsWatched()` - æ ‡è®°ä¸ºå·²è§‚çœ‹
- **è§‚çœ‹å†å²ç›¸å…³ï¼š** â­ æ–°å¢
  - `getVideoWatchHistory()` - è·å–è§‚çœ‹å†å²
  - `createVideoWatchHistory()` - åˆ›å»ºè§‚çœ‹è®°å½•
  - `updateVideoWatchHistory()` - æ›´æ–°è§‚çœ‹è®°å½•
- **ç”¨æˆ·åå¥½ç›¸å…³ï¼š** â­ æ–°å¢
  - `getUserPreferences()` - è·å–ç”¨æˆ·åå¥½
  - `updateUserPreferences()` - æ›´æ–°ç”¨æˆ·åå¥½

#### supabase.ts - Supabaseå®¢æˆ·ç«¯
**åŠŸèƒ½ï¼š** Supabaseè¿æ¥é…ç½®
- åˆå§‹åŒ– Supabase å®¢æˆ·ç«¯
- é…ç½®ç¯å¢ƒå˜é‡
- å¯¼å‡ºå®¢æˆ·ç«¯å®ä¾‹

### 3. ç»„ä»¶æ¨¡å— (src/components/)

#### common/ - é€šç”¨ç»„ä»¶
- **RouteGuard.tsx** - è·¯ç”±å®ˆå«ï¼Œä¿æŠ¤éœ€è¦ç™»å½•çš„é¡µé¢
- **ThemeToggle.tsx** - ä¸»é¢˜åˆ‡æ¢ç»„ä»¶ï¼ˆäº®è‰²/æš—è‰²ï¼‰
- **PageMeta.tsx** - é¡µé¢å…ƒä¿¡æ¯ç®¡ç†

#### layouts/ - å¸ƒå±€ç»„ä»¶
- **MainLayout.tsx** - ä¸»å¸ƒå±€ç»„ä»¶
  - å·¦ä¾§å¯¼èˆªæ ï¼ˆLogoã€èœå•ã€ç”¨æˆ·ä¿¡æ¯ï¼‰
  - å³ä¾§å†…å®¹åŒºåŸŸ
  - å“åº”å¼è®¾è®¡ï¼ˆæ¡Œé¢/ç§»åŠ¨ç«¯ï¼‰
  - ç§»åŠ¨ç«¯æ±‰å ¡èœå•

#### ui/ - UIåŸºç¡€ç»„ä»¶
åŸºäº shadcn/ui çš„ç»„ä»¶åº“ï¼ŒåŒ…å«50+ä¸ªé«˜è´¨é‡UIç»„ä»¶

### 4. ç±»å‹å®šä¹‰ (src/types/)

#### types.ts - ä¸šåŠ¡ç±»å‹å®šä¹‰
```typescript
// ç”¨æˆ·é…ç½®
export interface Profile {
  id: string;
  username: string;
  email: string;
  role: 'admin' | 'user';
  major: string | null;          // â­ æ–°å¢ï¼šä¸“ä¸š
  grade: string | null;          // â­ æ–°å¢ï¼šå¹´çº§
  interests: string[] | null;    // â­ æ–°å¢ï¼šå…´è¶£æ ‡ç­¾
  created_at: string;
  updated_at: string;
}

// å­¦ç”Ÿäº‹åŠ¡
export interface Task {
  id: string;
  user_id: string;
  title: string;
  description: string | null;
  task_type: TaskType;
  priority: PriorityLevel;
  status: TaskStatus;
  deadline: string | null;
  estimated_hours: number | null;
  created_at: string;
  updated_at: string;
}

// çŸ¥è¯†ç‚¹
export interface KnowledgeItem {
  id: string;
  user_id: string;
  title: string;
  content: string | null;
  subject: string | null;
  tags: string[] | null;
  source_url: string | null;
  review_count: number;
  next_review_at: string | null;
  created_at: string;
  updated_at: string;
}

// å­¦ä¹ è®°å½•
export interface StudySession {
  id: string;
  user_id: string;
  task_id: string | null;
  start_time: string;
  end_time: string | null;
  duration_minutes: number | null;
  notes: string | null;
  created_at: string;
}

// æ—¶é—´è¡¨è®¾ç½®
export interface ScheduleSettings {
  id: string;
  user_id: string;
  daily_study_goal_hours: number;
  preferred_start_time: string;
  preferred_end_time: string;
  break_duration_minutes: number;
  auto_schedule_enabled: boolean;
  created_at: string;
  updated_at: string;
}

// â­ æ–°å¢ï¼šä¸“ä¸šæ ‡ç­¾
export interface MajorTag {
  id: string;
  name: string;
  category: string | null;
  description: string | null;
  created_at: string;
}

// â­ æ–°å¢ï¼šè§†é¢‘æ¨è
export interface VideoRecommendation {
  id: string;
  user_id: string;
  video_id: string;
  video_title: string;
  video_url: string;
  video_cover: string | null;
  author: string | null;
  duration: number | null;
  view_count: number | null;
  tags: string[] | null;
  description: string | null;
  recommended_reason: string | null;
  is_watched: boolean;
  is_favorited: boolean;
  watch_progress: number;
  watched_at: string | null;
  created_at: string;
  updated_at: string;
}

// â­ æ–°å¢ï¼šè§†é¢‘è§‚çœ‹å†å²
export interface VideoWatchHistory {
  id: string;
  user_id: string;
  video_id: string;
  video_title: string;
  video_url: string;
  watch_duration: number | null;
  watch_progress: number | null;
  completed: boolean;
  notes: string | null;
  created_at: string;
  updated_at: string;
}

// â­ æ–°å¢ï¼šç”¨æˆ·åå¥½è®¾ç½®
export interface UserPreferences {
  id: string;
  user_id: string;
  preferred_tags: string[] | null;
  excluded_tags: string[] | null;
  preferred_duration_min: number | null;
  preferred_duration_max: number | null;
  auto_recommend: boolean;
  daily_recommendation_count: number;
  created_at: string;
  updated_at: string;
}
```

### 5. æ•°æ®åº“ç»“æ„ (supabase/migrations/)

#### 00001_create_initial_schema.sql - åˆå§‹æ•°æ®åº“ç»“æ„
**åŒ…å«è¡¨ï¼š**
1. **profiles** - ç”¨æˆ·é…ç½®è¡¨
2. **tasks** - å­¦ç”Ÿäº‹åŠ¡è¡¨
3. **knowledge_items** - çŸ¥è¯†ç‚¹æ”¶è—è¡¨
4. **study_sessions** - å­¦ä¹ æ—¶é—´è®°å½•è¡¨
5. **schedule_settings** - æ—¶é—´è¡¨é…ç½®è¡¨

#### 00002_add_video_recommendation_features.sql - è§†é¢‘æ¨èåŠŸèƒ½ â­
**åŒ…å«è¡¨ï¼š**
1. **major_tags** - ä¸“ä¸šæ ‡ç­¾è¡¨ï¼ˆé¢„ç½®30+ä¸“ä¸šï¼‰
2. **video_recommendations** - è§†é¢‘æ¨èè¡¨
3. **video_watch_history** - è§†é¢‘è§‚çœ‹å†å²è¡¨
4. **user_preferences** - ç”¨æˆ·åå¥½è®¾ç½®è¡¨

**æ‰©å±•å­—æ®µï¼š**
- profiles è¡¨æ–°å¢ï¼šmajor, grade, interests

**å®‰å…¨ç­–ç•¥ï¼š**
- æ‰€æœ‰è¡¨å¯ç”¨ RLSï¼ˆRow Level Securityï¼‰
- ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®
- ç®¡ç†å‘˜å¯ä»¥ç®¡ç†ä¸“ä¸šæ ‡ç­¾

## ğŸ¨ è®¾è®¡ç³»ç»Ÿ

### é…è‰²æ–¹æ¡ˆ
- **ä¸»è‰²è°ƒï¼š** æ·±è“è‰² (#1E3A8A) + ç»¿è‰² (#10B981)
- **è®¾è®¡é£æ ¼ï¼š** ç°ä»£æ‰å¹³åŒ–è®¾è®¡
- **åœ†è§’ï¼š** 8px
- **ä¸»é¢˜ï¼š** æ”¯æŒäº®è‰²/æš—è‰²æ¨¡å¼åˆ‡æ¢

### å¸ƒå±€ç»“æ„
- **æ¡Œé¢ç«¯ï¼š** å·¦ä¾§å¯¼èˆªæ  + å³ä¾§å†…å®¹åŒº
- **ç§»åŠ¨ç«¯ï¼š** æ±‰å ¡èœå• + å…¨å±å†…å®¹åŒº
- **å“åº”å¼æ–­ç‚¹ï¼š** ä½¿ç”¨ Tailwind CSS æ ‡å‡†æ–­ç‚¹

## ğŸ”§ æŠ€æœ¯æ ˆ

### å‰ç«¯æ¡†æ¶
- **React 18.3.1** - UIæ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨
- **Vite** - æ„å»ºå·¥å…·

### UIç»„ä»¶åº“
- **shadcn/ui** - é«˜è´¨é‡ç»„ä»¶åº“
- **Tailwind CSS** - æ ·å¼æ¡†æ¶
- **Lucide React** - å›¾æ ‡åº“

### çŠ¶æ€ç®¡ç†
- **React Context** - å…¨å±€çŠ¶æ€ï¼ˆè®¤è¯ï¼‰
- **React Hooks** - ç»„ä»¶çŠ¶æ€

### æ•°æ®å¯è§†åŒ–
- **Recharts** - å›¾è¡¨åº“

### åç«¯æœåŠ¡
- **Supabase** - BaaSå¹³å°
  - PostgreSQL æ•°æ®åº“
  - è®¤è¯æœåŠ¡
  - å®æ—¶è®¢é˜…
  - å­˜å‚¨æœåŠ¡
  - Row Level Security

### è·¯ç”±
- **React Router v6** - å®¢æˆ·ç«¯è·¯ç”±

### æ—¥æœŸå¤„ç†
- **date-fns** - æ—¥æœŸæ ¼å¼åŒ–å’Œè®¡ç®—

### ä»£ç è´¨é‡
- **ESLint** - ä»£ç æ£€æŸ¥
- **Biome** - ä»£ç æ ¼å¼åŒ–
- **TypeScript** - ç±»å‹æ£€æŸ¥

## ğŸ“¦ ä¾èµ–ç®¡ç†

### åŒ…ç®¡ç†å™¨
- **pnpm** - å¿«é€Ÿã€èŠ‚çœç£ç›˜ç©ºé—´çš„åŒ…ç®¡ç†å™¨

### ä¸»è¦ä¾èµ–
```json
{
  "@supabase/supabase-js": "^2.x",
  "react": "^18.3.1",
  "react-dom": "^18.3.1",
  "react-router-dom": "^6.x",
  "date-fns": "^3.x",
  "recharts": "^2.x",
  "lucide-react": "^0.x",
  "sonner": "^1.x"
}
```

## ğŸš€ å¼€å‘æŒ‡å—

### ç¯å¢ƒå˜é‡
åˆ›å»º `.env.local` æ–‡ä»¶ï¼š
```env
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
VITE_APP_ID=your_app_id
VITE_API_ENV=production
```

### å¼€å‘å‘½ä»¤
```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# ä»£ç æ£€æŸ¥
pnpm lint

# ç±»å‹æ£€æŸ¥
pnpm type-check
```

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ 2 ç©ºæ ¼ç¼©è¿›
- ç»„ä»¶ä½¿ç”¨ PascalCase å‘½å
- æ–‡ä»¶åä½¿ç”¨ PascalCaseï¼ˆç»„ä»¶ï¼‰æˆ– kebab-caseï¼ˆå·¥å…·ï¼‰
- å¯¼å‡ºä¼˜å…ˆä½¿ç”¨ named export
- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼

## ğŸ“ å¼€å‘æµç¨‹

### 1. åˆ›å»ºæ–°é¡µé¢
1. åœ¨ `src/pages/` åˆ›å»ºé¡µé¢ç»„ä»¶
2. åœ¨ `src/App.tsx` æ·»åŠ è·¯ç”±
3. åœ¨ `src/components/layouts/MainLayout.tsx` æ·»åŠ å¯¼èˆªé“¾æ¥

### 2. æ·»åŠ æ•°æ®åº“è¡¨
1. åœ¨ `supabase/migrations/` åˆ›å»ºè¿ç§»æ–‡ä»¶
2. åœ¨ `src/types/types.ts` æ·»åŠ ç±»å‹å®šä¹‰
3. åœ¨ `src/db/api.ts` æ·»åŠ APIå‡½æ•°

### 3. åˆ›å»ºæ–°ç»„ä»¶
1. åœ¨ `src/components/` å¯¹åº”ç›®å½•åˆ›å»ºç»„ä»¶
2. ä½¿ç”¨ shadcn/ui ç»„ä»¶ä½œä¸ºåŸºç¡€
3. éµå¾ªé¡¹ç›®è®¾è®¡è§„èŒƒ

## ğŸ”’ å®‰å…¨è¯´æ˜

### è®¤è¯æœºåˆ¶
- ä½¿ç”¨ Supabase Auth
- ç”¨æˆ·å+å¯†ç ç™»å½•
- è‡ªåŠ¨æ·»åŠ  @miaoda.com é‚®ç®±åç¼€
- é¦–ä½æ³¨å†Œç”¨æˆ·è‡ªåŠ¨æˆä¸ºç®¡ç†å‘˜

### æ•°æ®å®‰å…¨
- å¯ç”¨ Row Level Security (RLS)
- ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®
- ç®¡ç†å‘˜æœ‰é¢å¤–æƒé™
- æ‰€æœ‰APIè°ƒç”¨éƒ½ç»è¿‡è®¤è¯

### ç¯å¢ƒå˜é‡
- æ•æ„Ÿä¿¡æ¯å­˜å‚¨åœ¨ç¯å¢ƒå˜é‡ä¸­
- ä¸æäº¤ `.env` æ–‡ä»¶åˆ°ç‰ˆæœ¬æ§åˆ¶
- ä½¿ç”¨ Vite çš„ `import.meta.env` è®¿é—®

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [README.md](./README.md) - é¡¹ç›®è¯´æ˜
- [TODO.md](./TODO.md) - ä»»åŠ¡æ¸…å•
- [docs/prd.md](./docs/prd.md) - äº§å“éœ€æ±‚æ–‡æ¡£

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. å­¦ç”Ÿäº‹åŠ¡ç®¡ç†
- ç«èµ›ã€ä½œä¸šã€è€ƒè¯•å…¨æ–¹ä½ç®¡ç†
- ä¼˜å…ˆçº§å’ŒçŠ¶æ€ç®¡ç†
- æˆªæ­¢æ—¶é—´æé†’

### 2. æ™ºèƒ½æ—¶é—´è¡¨
- è‡ªåŠ¨ç”Ÿæˆä¸ªæ€§åŒ–å­¦ä¹ è®¡åˆ’
- å‘¨è§†å›¾å±•ç¤º
- æ ¹æ®ä»»åŠ¡ä¼˜å…ˆçº§æ™ºèƒ½å®‰æ’

### 3. çŸ¥è¯†æ”¶è—
- çŸ¥è¯†ç‚¹æ”¶è—å’Œæ•´ç†
- é—´éš”é‡å¤ç®—æ³•æé†’å¤ä¹ 
- å­¦ç§‘åˆ†ç±»ç®¡ç†

### 4. ç§äººç»ˆç«¯ â­ æ–°åŠŸèƒ½
- æ ¹æ®ä¸“ä¸šæ™ºèƒ½æ¨è Bilibili å­¦æœ¯è§†é¢‘
- è§†é¢‘æ”¶è—å’Œè§‚çœ‹å†å²
- å¤šç»´åº¦ç­›é€‰å’Œæœç´¢

### 5. å­¦ä¹ ç»Ÿè®¡
- å­¦ä¹ æ—¶é•¿ç»Ÿè®¡
- ä»»åŠ¡å®Œæˆæƒ…å†µåˆ†æ
- æ•°æ®å¯è§†åŒ–å±•ç¤º

### 6. ç³»ç»Ÿè®¾ç½®
- æ—¶é—´è¡¨åå¥½é…ç½®
- ä¸ªäººä¿¡æ¯è®¾ç½®
- è§†é¢‘æ¨èåå¥½

## ğŸŒŸ é¡¹ç›®äº®ç‚¹

1. **å®Œæ•´çš„å­¦ç”Ÿäº‹åŠ¡ç®¡ç†ç³»ç»Ÿ** - æ¶µç›–å­¦ä¹ ç”Ÿæ´»å„ä¸ªæ–¹é¢
2. **æ™ºèƒ½æ¨èç³»ç»Ÿ** - æ ¹æ®ä¸“ä¸šæ¨é€å­¦æœ¯è§†é¢‘
3. **æ•°æ®å¯è§†åŒ–** - ç›´è§‚å±•ç¤ºå­¦ä¹ æ•°æ®
4. **å“åº”å¼è®¾è®¡** - å®Œç¾é€‚é…æ¡Œé¢å’Œç§»åŠ¨ç«¯
5. **ä¸»é¢˜åˆ‡æ¢** - æ”¯æŒäº®è‰²/æš—è‰²æ¨¡å¼
6. **ç±»å‹å®‰å…¨** - å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
7. **å®‰å…¨å¯é ** - RLS ä¿æŠ¤ç”¨æˆ·æ•°æ®
8. **ç°ä»£åŒ–æŠ€æœ¯æ ˆ** - React + TypeScript + Supabase

---

**æœ€åæ›´æ–°ï¼š** 2025-12-17  
**ç‰ˆæœ¬ï¼š** 1.0.0  
**ç»´æŠ¤è€…ï¼š** æ™ºå­¦ç§˜ä¼´å¼€å‘å›¢é˜Ÿ
